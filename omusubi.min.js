!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Omusubi=t():e.Omusubi=t()}(this,(function(){return(()=>{"use strict";var e={220:(e,t,n)=>{function r(e){let t=new Uint16Array(e.length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);let n=2166136261;for(let e of t)n=16777619*n^e;return n}function s(e,t){return function(n){return customElements.define(e,n,t)}}function a(e,...t){return new i(e,t)}n.r(t),n.d(t,{defineComponent:()=>s,html:()=>a,Component:()=>o});class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get styles(){return[new CSSStyleSheet]}connectedCallback(){this.state=this.init();const{strings:e,values:t}=this.render(this.state);null==this.template&&(this.template=new f(e),this.shadowRoot.appendChild(this.template.fragment),this.template.fragment=this.shadowRoot,this.shadowRoot.adoptedStyleSheets=this.constructor.styles),this.template._update(...t)}init(){}render(){return a``}dispatch(e,...t){this.state=this[e](this.state,...t);const{values:n}=this.render(this.state);this.template._update(...n)}}class i{constructor(e,t){this.strings=e,this.values=t}}class l{constructor(e){this.template=e}hash(){return this.template.temp_hash}}class d extends l{constructor(e,t){super(e),this.args=t}update(e=null){e&&(this.args=e),this.template._update(...this.args)}}class c extends l{constructor(e){super(e)}}class h{constructor(e,t,n=null){this.values=new Array,this.container=t,this.hash=n;for(const t of e)if(t instanceof i){let e=new f(t.strings);this.values.push(new d(e,t.values))}else{let e=new m(t);this.values.push(new c(e))}}diff(e){let t=this.values.length,n=e.values.length,r=new Array(t+1);for(let e=0;e<=t;e++){r[e]=new Array(n+1);for(let t=0;t<=n;t++)r[e][t]={d:t,from:[e,t-1]};r[e][0]={d:e,from:[e-1,0]}}for(let s=1;s<=t;s++)for(let t=1;t<=n;t++)if(this.values[s-1].hash()===e.values[t-1].hash())switch(Math.min(r[s-1][t].d+1,r[s][t-1].d+1,r[s-1][t-1].d)){case r[s-1][t].d:r[s][t]={d:r[s-1][t].d+1,from:[s-1,t]};break;case r[s][t-1].d:r[s][t]={d:r[s][t-1].d+1,from:[s,t-1]};break;case r[s-1][t-1].d:r[s][t]={d:r[s][t].d,from:[s-1,t-1]}}else r[s-1][t].d+1<r[s][t-1].d+1?r[s][t]={d:r[s-1][t].d+1,from:[s-1,t]}:r[s][t]={d:r[s][t-1].d+1,from:[s,t-1]};let s=this.values.length,a=e.values.length;for(;s>0||a>0;){const e=r[s][a].from[0],t=r[s][a].from[1];r[e][t].next=[s,a],s=e,a=t}s=0,a=0;const o=[];for(;s<this.values.length||a<e.values.length;){const t=r[s][a].next[0],n=r[s][a].next[1];if(s+1==t&&a+1==n)o.push(this.values[s]),o[o.length-1]instanceof d&&o[o.length-1].update(e.values[a].args),s++,a++;else if(s+1==t&&a==n)this.values[s].template.remove(),s++;else{if(s!=t||a+1!=n)break;if(0==o.length){const t=document.createTreeWalker(this.container.fragment);do{let n=t.currentNode;if(n instanceof Comment&&n.data.trim()=="node-"+this.hash+"-end"){n.parentNode.insertBefore(e.values[a].template.fragment,n),e.values[a].template.fragment=n.parentNode,e.values[a]instanceof d&&e.values[a].update();break}}while(t.nextNode());e.values[a].fragment=t.currentNode.parentNode}else o[o.length-1].template.insertAfter(e.values[a].template),e.values[a].template.fragment=o[0].template.fragment,e.values[a]instanceof d&&e.values[a].update(e.values[a].args);o.push(e.values[a]),a++}}this.values=o}}class u{constructor(e,t,n){this.hash=e,this.temp_hash=t,this.arg_hash=n}remove(){const e=document.createTreeWalker(this.fragment),t=document.createRange();do{if(e.currentNode instanceof Comment&&e.currentNode.data.trim()=="node-"+this.hash+"-start"){e.currentNode.parentNode?t.setStart(e.currentNode.parentNode,[].slice.call(e.currentNode.parentNode.childNodes).indexOf(e.currentNode)):t.setStart(this.fragment,[].slice.call(this.fragment.childNodes).indexOf(e.currentNode));do{if(e.currentNode instanceof Comment&&e.currentNode.data.trim()=="node-"+this.hash+"-end"){e.currentNode.parentNode?t.setEnd(e.currentNode.parentNode,[].slice.call(e.currentNode.parentNode.childNodes).indexOf(e.currentNode)+1):t.setEnd(this.fragment,[].slice.call(this.fragment.childNodes).indexOf(e.currentNode)+1);break}}while(e.nextNode());t.deleteContents();break}}while(e.nextNode())}insertAfter(e){const t=document.createTreeWalker(this.fragment);for(;t.nextNode();){let n=t.currentNode;if(n instanceof Comment&&n.data.trim()=="node-"+this.hash+"-end"){n.parentNode?n.parentNode.insertBefore(e.fragment,n.nextSibling):this.fragment.insertBefore(e.fragment,n.nextSibling);break}}}}class f extends u{constructor(e){null==e&&(e=[]);let t=r(e.join("")+Math.random());super(t,r("temp"+e.join("")),t),this.strings=e;let n="\x3c!-- node-"+t+"-start --\x3e";this.placeholder=[];for(const t in e){const s=e[t];n+=s;const a=s.trim();if("="==a[a.length-1]||"="==a[a.length-2]){let e="";if("'"==a[a.length-1]||'"'==a[a.length-1]||"`"==a[a.length-1]){n+=a[a.length];for(let t=a.length-3;t>=0&&" "!=a[t];t--)e=a[t]+e}else{n+='""';for(let t=a.length-2;t>=0&&" "!=a[t];t--)e=a[t]+e}const s=r(e+t+Math.random());n+=" data-attr"+s+"="+e,this.placeholder.push({hash:s,type:"attr",attr:e,value:null})}else if(t!=e.length-1){const e=r(t+n+Math.random());n+="\x3c!-- node-"+e+"-start --\x3e\x3c!-- node-"+e+"-end --\x3e",this.placeholder.push({type:"temp",hash:e,temp_arr:new h([""],this,e)})}}n+="\x3c!-- node-"+t+"-end --\x3e";const s=document.createElement("template");s.innerHTML=n,this.fragment=s.content;const a=document.createTreeWalker(this.fragment,NodeFilter.SHOW_COMMENT);for(const e of this.placeholder)if("attr"!=e.type)for(;a.nextNode();)a.currentNode.data.trim()=="node-"+e.hash+"-start"&&(a.nextNode(),a.currentNode.parentNode.insertBefore(e.temp_arr.values[0].template.fragment,a.currentNode),e.temp_arr.values[0].template.fragment=a.currentNode.parentNode,a.nextNode())}_update(...e){this.arg_hash=r(this.strings.join("")+e.map((e=>String(e))).join(""));const t=document.createTreeWalker(this.fragment);for(let n=0;n<this.placeholder.length;n++){const r=this.placeholder[n],{type:s,hash:a}=r;if("attr"==s){const t=this.fragment.querySelector("[data-attr"+a+"]"),s=r.attr;switch(s[0]){case"@":t.removeEventListener(s.slice(1),r.value),t.addEventListener(s.slice(1),e[n]);break;case".":t[s.slice(1)]=e[n];break;case"?":let a=s.slice(1);e[n]?t.setAttribute(a,""):t.hasAttribute(a)&&t.removeAttribute(a);break;default:t.setAttribute(s,String(e[n]))}r.value=e[n]}else{do{if(!(t.currentNode instanceof Text)&&t.currentNode instanceof Comment&&t.currentNode.data.trim()=="node-"+a+"-start")break}while(t.nextNode());const s=document.createRange();let o=t.currentNode,i=o.parentNode?o.parentNode:this.fragment;s.setStart(i,[].slice.call(i.childNodes).indexOf(o));do{let e=t.currentNode;if(e instanceof Comment&&e.data.trim()=="node-"+a+"-end")break;s.setEnd(e.parentNode,[].slice.call(e.parentNode.childNodes).indexOf(e))}while(t.nextNode());Array.isArray(e[n])||(e[n]=[e[n]]);const l=new h(e[n]);r.temp_arr.diff(l)}t.nextNode()}}}class m extends u{constructor(e){let t=r(e),n=r("text"+String(e));super(r(e+Math.random()),n,t);const s=document.createElement("template");s.innerHTML="\x3c!-- node-"+this.hash+"-start --\x3e"+String(e)+"\x3c!-- node-"+this.hash+"-end --\x3e",this.fragment=s.content}}}},t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(220)})()}));