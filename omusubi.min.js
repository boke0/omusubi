!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Omusubi=t():e.Omusubi=t()}(this,(function(){return(()=>{"use strict";var e={220:(e,t,r)=>{function n(e){let t=new Uint16Array(e.length);for(let r=0;r<t.length;r++)t[r]=e.charCodeAt(r);let r=2166136261;for(let e of t)r=16777619*r^e;return r}function s(e,t){return function(r){return customElements.define(e,r,t)}}function a(e,...t){return new i(e,t)}r.r(t),r.d(t,{defineComponent:()=>s,html:()=>a,Component:()=>o});class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get styles(){return[new CSSStyleSheet]}connectedCallback(){this.state=this.init();const{strings:e,values:t}=this.render(this.state);null==this.template&&(this.template=new f(e),this.shadowRoot.appendChild(this.template.fragment),this.template.fragment=this.shadowRoot,this.shadowRoot.adoptedStyleSheets=this.constructor.styles),this.template._update(...t)}init(){}render(){return a``}dispatch(e,...t){this.state=this[e](this.state,...t);const{values:r}=this.render(this.state);this.template._update(...r)}}class i{constructor(e,t){this.strings=e,this.values=t}}class d{constructor(e){this.template=e}hash(){return this.template.temp_hash}}class l extends d{constructor(e,t){super(e),this.args=t}update(e=null){e&&(this.args=e),this.template._update(...this.args)}}class c extends d{constructor(e){super(e)}}class h{constructor(e,t,r=null){this.values=new Array,this.container=t,this.hash=r;for(const t of e)if(t instanceof i){let e=new f(t.strings);this.values.push(new l(e,t.values))}else{let e=new m(t);this.values.push(new c(e))}}diff(e){let t=this.values.length,r=e.values.length,n=new Array(t+1);for(let e=0;e<=t;e++){n[e]=new Array(r+1);for(let t=0;t<=r;t++)n[e][t]={d:t,from:[0,t-1]};n[e][0]={d:e,from:[e-1,0]}}for(let s=1;s<=t;s++)for(let t=1;t<=r;t++)if(this.values[s-1].hash()===e.values[t-1].hash())switch(Math.min(n[s-1][t].d+1,n[s][t-1].d+1,n[s-1][t-1].d)){case n[s-1][t].d:n[s][t]={d:n[s-1][t].d+1,from:[s-1,t]};break;case n[s][t-1].d:n[s][t]={d:n[s][t-1].d+1,from:[s,t-1]};break;case n[s-1][t-1].d:n[s][t]={d:n[s][t].d+1,from:[s-1,t-1]}}else n[s-1][t]+1?n[s][t]={d:n[s-1][t].d+1,from:[s-1,t]}:n[s][t]={d:n[s][t-1].d+1,from:[s,t-1]};let s=this.values.length,a=e.values.length;const o=[];for(;s>0||a>0;){const t=n[s][a].from[0],r=n[s][a].from[1];if(s-1==t&&a-1==r)s--,a--,o.unshift(this.values[s]),o[0]instanceof l&&o[0].update(e.values[a].args);else if(s-1==t&&a==r)s--,this.values[s].template.remove();else{if(s!=t||a-1!=r)break;if(a--,0==o.length){const t=document.createTreeWalker(this.container.fragment);do{let r=t.currentNode;if(r instanceof Comment&&r.data.trim()=="node-"+this.hash+"-end"){r.parentNode.insertBefore(e.values[a].template.fragment,r),e.values[a].template.fragment=r.parentNode,e.values[s]instanceof l&&e.values[a].update();break}}while(t.nextNode());e.values[a].fragment=t.currentNode.parentNode}else o[0].template.insertBefore(e.values[a].template),e.values[a].template.fragment=o[0].template.fragment,e.values[s]instanceof l&&e.values[a].update(e.values[a].args);o.unshift(e.values[a])}}this.values=o}}class u{constructor(e,t,r){this.hash=e,this.temp_hash=t,this.arg_hash=r}remove(){const e=document.createTreeWalker(this.fragment),t=document.createRange();do{if(e.currentNode instanceof Comment&&e.currentNode.data.trim()=="node-"+this.hash+"-start"){e.currentNode.parentNode?t.setStart(e.currentNode.parentNode,[].slice.call(e.currentNode.parentNode.childNodes).indexOf(e.currentNode)):t.setStart(this.fragment,[].slice.call(this.fragment.childNodes).indexOf(e.currentNode));do{if(e.currentNode instanceof Comment&&e.currentNode.data.trim()=="node-"+this.hash+"-end"){e.currentNode.parentNode?t.setEnd(e.currentNode.parentNode,[].slice.call(e.currentNode.parentNode.childNodes).indexOf(e.currentNode)+1):t.setEnd(this.fragment,[].slice.call(this.fragment.childNodes).indexOf(e.currentNode)+1);break}}while(e.nextNode());t.deleteContents();break}}while(e.nextNode())}insertBefore(e){const t=document.createTreeWalker(this.fragment);for(;t.nextNode();){let r=t.currentNode;if(r instanceof Comment&&r.data.trim()=="node-"+this.hash+"-start"){r.parentNode?r.parentNode.insertBefore(e.fragment,r):this.fragment.insertBefore(e.fragment,r);break}}}}class f extends u{constructor(e){null==e&&(e=[]);let t=n(e.join("")+Math.random());super(t,n("temp"+e.join("")),t),this.strings=e;let r="\x3c!-- node-"+t+"-start --\x3e";this.placeholder=[];for(const t in e){const s=e[t];r+=s;const a=s.trim();if("="==a[a.length-1]||"="==a[a.length-2]){let e="";if("'"==a[a.length-1]||'"'==a[a.length-1]||"`"==a[a.length-1]){r+=a[a.length];for(let t=a.length-3;t>=0&&" "!=a[t];t--)e=a[t]+e}else{r+='""';for(let t=a.length-2;t>=0&&" "!=a[t];t--)e=a[t]+e}const s=n(e+t+Math.random());r+=" data-attr"+s+"="+e,this.placeholder.push({hash:s,type:"attr",attr:e})}else if(t!=e.length-1){const e=n(t+r+Math.random());r+="\x3c!-- node-"+e+"-start --\x3e\x3c!-- node-"+e+"-end --\x3e",this.placeholder.push({type:"temp",hash:e,temp_arr:new h([""],this,e)})}}r+="\x3c!-- node-"+t+"-end --\x3e";const s=document.createElement("template");s.innerHTML=r,this.fragment=s.content;const a=document.createTreeWalker(this.fragment,NodeFilter.SHOW_COMMENT);for(const e of this.placeholder)if("attr"!=e.type)for(;a.nextNode();)a.currentNode.data.trim()=="node-"+e.hash+"-start"&&(a.nextNode(),a.currentNode.parentNode.insertBefore(e.temp_arr.values[0].template.fragment,a.currentNode),e.temp_arr.values[0].template.fragment=a.currentNode.parentNode,a.nextNode())}_update(...e){this.arg_hash=n(this.strings.join("")+e.map((e=>String(e))).join(""));const t=document.createTreeWalker(this.fragment);for(const r in this.placeholder){const n=this.placeholder[r],{type:s,hash:a}=n;for(;t.nextNode();)if(!(t.currentNode instanceof Text)){if(t.currentNode instanceof Comment&&t.currentNode.data.trim()=="node-"+a+"-start")break;if("attr"==s&&t.currentNode instanceof HTMLElement&&t.currentNode.hasAttribute("data-attr"+a))break}if("attr"==s){const s=t.currentNode,a=n.attr;switch(a[0]){case"@":s["on"+a.slice(1)]=e[r];break;case".":s[a.slice(1)]=e[r];break;case"?":let t=a.slice(1);e[r]?s.setAttribute(t,""):p.element.hasAttribute(t)&&s.removeAttribute(t);break;default:s.setAttribute(a,String(e[r]))}}else{t.nextNode();const s=document.createRange();let o=t.currentNode,i=o.parentNode?o.parentNode:this.fragment;s.setStart(i,[].slice.call(i.childNodes).indexOf(o));do{let e=t.currentNode;if(e instanceof Comment&&e.data.trim()=="node-"+a+"-end")break;s.setEnd(e.parentNode,[].slice.call(e.parentNode.childNodes).indexOf(e))}while(t.nextNode());Array.isArray(e[r])||(e[r]=[e[r]]);const d=new h(e[r]);n.temp_arr.diff(d)}t.nextNode()}}}class m extends u{constructor(e){let t=n(e),r=n("text"+String(e));super(n(e+Math.random()),r,t);const s=document.createElement("template");s.innerHTML="\x3c!-- node-"+this.hash+"-start --\x3e"+String(e)+"\x3c!-- node-"+this.hash+"-end --\x3e",this.fragment=s.content}}}},t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(220)})()}));